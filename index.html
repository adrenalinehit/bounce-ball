<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover"
    />
    <title>Bounce Game</title>
    <link rel="stylesheet" href="./styles.css" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-BF71D8EH7X"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-BF71D8EH7X');
    </script>

    <!-- reCAPTCHA v3 -->
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
  </head>
  <body>
    <div class="app">
      <header class="topbar">
        <div class="title">Bounce Game</div>
        <div class="hint">
          Move: <kbd>A</kbd>/<kbd>D</kbd> or <kbd>←</kbd>/<kbd>→</kbd> · Launch: <kbd>Space</kbd> · Pause: <kbd>P</kbd> · Restart: <kbd>R</kbd>
        </div>
        <div class="uiMenuWrap">
          <button class="uiMenuBtn" id="uiMenuBtn" type="button" aria-haspopup="true" aria-expanded="false">
            Power ups
          </button>
          <div class="uiMenu" id="uiMenu" hidden>
            <div class="uiMenuTitle">Power ups / Visual Variations</div>
            <label class="uiOpt"><input id="optRocketTails" type="checkbox" /> Rocket tails (ball trail)</label>
            <label class="uiOpt"><input id="optColoredBlocks" type="checkbox" /> Coloured blocks</label>
            <label class="uiOpt"><input id="optAlwaysMultiball" type="checkbox" /> Always multi-ball</label>
            <label class="uiOpt"><input id="optScanlines" type="checkbox" /> CRT scanlines</label>
            <label class="uiOpt"><input id="optMinimalHud" type="checkbox" /> Minimal HUD</label>
            <label class="uiOpt"><input id="optShowFps" type="checkbox" /> Show FPS (footer)</label>
            <label class="uiOpt"><input id="optReducedMotion" type="checkbox" /> Reduced motion (no shake/flash)</label>
          </div>
        </div>
        <div class="cheatPanel" id="cheatPanel" hidden>
          <span class="cheatLabel">Cheat</span>
          <label class="cheatField">
            Level
            <select id="cheatLevel" aria-label="Cheat level selector"></select>
          </label>
          <button class="cheatBtn" id="cheatLoad" type="button">Load</button>
        </div>
      </header>

      <main class="stage">
        <canvas id="game" width="960" height="540" aria-label="Bounce Game canvas"></canvas>
        <div class="hud" id="hud">
          <div class="hudRow">
            <div class="hudItem"><span class="label">Score</span> <span id="score">0</span></div>
            <div class="hudItem"><span class="label">Lives</span> <span id="lives">3</span></div>
            <div class="hudItem"><span class="label">Level</span> <span id="level">1</span></div>
            <div class="hudItem"><span class="label">Active</span> <span id="effects">—</span></div>
          </div>
          <div class="hudMsg" id="message"></div>
        </div>
      </main>

      <section class="leaderboard" aria-label="High scores">
        <div class="leaderboardHeader">
          <div class="leaderboardTitle">High Scores</div>
          <div class="leaderboardSub" id="leaderboardStatus">Loading…</div>
        </div>
        <ol class="leaderboardList" id="leaderboardList"></ol>
      </section>

      <footer class="footer">
        <span>Tip: drag to move, tap to launch, double-tap to pause, long-press to restart.</span>
        <span class="fps" id="fps" hidden>FPS: --</span>
      </footer>
    </div>

    <div class="modalBackdrop" id="nameModal" hidden>
      <div class="modal">
        <div class="modalTitle">Enter your name</div>
        <div class="modalSub">This will be used for the Top 10 leaderboard.</div>
        <form id="nameForm" class="modalForm">
          <input
            id="playerName"
            class="modalInput"
            type="text"
            inputmode="text"
            autocomplete="nickname"
            maxlength="16"
            placeholder="Player"
            required
          />
          <div class="g-recaptcha" data-sitekey="6LdRekUsAAAAAHwevN-t_Dm52Uwfm0GyMDOd_XTK" data-action="name_submit"></div>
          <button class="modalBtn" id="playBtn" type="submit">Play</button>
        </form>
        <div class="modalError" id="nameError" hidden></div>
        <div class="modalHint">Tip: keep it short (max 16 chars).</div>
      </div>
    </div>

    <script type="module" src="./src/main.js"></script>
  </body>
</html>


